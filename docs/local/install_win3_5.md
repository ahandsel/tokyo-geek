# JPKI利用者ソフトVer3.5 インストール手順書


## Table of contents <!-- omit in toc -->

* [第２章 手順概要](#第２章-手順概要)
  * [（前提）](#前提)
* [第３章 JPKI利用者ソフトのインストール](#第３章-jpki利用者ソフトのインストール)
* [第４章 JPKI利用者ソフトの起動](#第４章-jpki利用者ソフトの起動)
* [第５章 JPKI利用者ソフトのアンインストール](#第５章-jpki利用者ソフトのアンインストール)
* [第６章 Android端末とのペアリング](#第６章-android端末とのペアリング)
* [付録１．システム環境変数「Path」値の長さの制限について](#付録１システム環境変数path値の長さの制限について)
* [付録２．アップデートについて](#付録２アップデートについて)
* [付録３．IC カードリーダライタ設定について](#付録３ic-カードリーダライタ設定について)
* [付録４．更新通知設定の変更方法について](#付録４更新通知設定の変更方法について)


## 第２章 手順概要

手順の概要は以下の通りです。

* JPKI利用者ソフトのインストール

  JPKI利用者ソフトをインストールします。JPKI利用者ソフトのインストール手順については、本手順書「第３章 JPKI利用者ソフトのインストール」を参照してください。

* ICカードリーダライタドライバのインストール

  お使いになる IC カードリーダライタのドライバソフトウェアをインストールします。

  IC カードリーダライタの接続方法およびドライバソフトウェアのインストール方法については、お使いになる製品の設定手順書等に従ってください。

  （既に IC カードリーダライタのドライバをインストールされている場合、本手順は不要です。）

* JPKI利用者ソフトの起動

  JPKI利用者ソフトを起動します。JPKI利用者ソフトの起動方法および IC カードリーダライタの設定方法については、本手順書の「第４章 JPKI利用者ソフトの起動」や JPKI利用者ソフトのヘルプ等を参照してください。


### （前提）

JPKI利用者ソフトの一部機能を利用するためには JRE（Java の実行環境）のインストールが必要になります。JRE のインストールが必要な機能の詳細については、JPKI利用者ソフトのヘルプ等を参照してください。また、JRE のダウンロード方法およびインストール方法については、Oracle 社のホームページを参照してください。

なお、JPKIポータルサイトにダウンロード方法やインストール方法についての参考情報を掲載しています。（<https://www.jpki.go.jp/e-apply/jre.html）>


## 第３章 JPKI利用者ソフトのインストール

JPKI利用者ソフトのインストールを行います。（本章では、Windows10 をお使いの場合の例を示します。）

必ず Administrator グループのユーザでログインし、インストールを行ってください。（Administrator グループ以外のユーザでインストールを行うことはできません。）

1. Windows 上で起動しているすべてのソフトウェアを終了します。（それぞれのソフトウェアの終了方法については、ソフトウェアに付属のマニュアルを参照してください。）

2. エクスプローラ等を利用し、JPKIポータルサイトからダウンロードした実行ファイル `JPKIAppli03-05.exe` をダブルクリックしてインストーラを起動してください。


**（注意事項）**

本利用者ソフトは旧バージョン等からアップデートすることが可能です。手順については付録２を参照してください。

ユーザーアカウント制御ダイアログが表示されます。`はい(Y)` ボタンをクリックすると JPKI利用者ソフトセットアップダイアログが表示されます。


**（注意事項）**

以下のユーザーアカウント制御ダイアログが表示される場合があります。JPKIポータルサイトからダウンロードした `JPKIAppli03-05.exe` を実行していることを確認し、`はい(Y)` ボタンをクリックすると、JPKI利用者ソフトセットアップ画面が表示されます。

3. JPKI利用者ソフトセットアップ画面が表示されます。

4. `次へ(N)` ボタンをクリックして、次画面に進みます。

5. インストール先を確認し、`次へ(N)` ボタンをクリックして次画面に進みます。インストール先を変更する場合は、`参照(R)` ボタンをクリックし、インストール先を決定してください。


**（注意事項）**

システム環境変数 `Path` 値の長さの制限を越えてしまう場合、エラーメッセージが表示されることがあります（付録１参照）。


**（注意事項）**

旧バージョン等の JPKI利用者ソフトが既にインストールされている環境にインストール（アップデート）する場合、インストール先の選択はできません。

6. プログラムフォルダを確認し、`次へ(N)` ボタンをクリックして次画面に進みます。プログラムフォルダ名を変更する場合は、`プログラムフォルダ` 欄に変更するフォルダ名を入力してください。

7. 設定内容を確認し、`次へ(N)` ボタンをクリックして次画面に進みます。

8. JPKI利用者ソフトのインストールが開始されます。


**（注意事項）**

JPKI利用者ソフトを再インストールする場合、以下の上書き確認メッセージが表示される場合があります。`はい(Y)` ボタンをクリックしてください。

9. 電子証明書の更新通知設定ダイアログが表示されます。更新通知を有効にする場合は `はい` ボタンをクリックしてください。インストール後に、更新通知の設定を変更する場合の手順については、付録４を参照してください。`はい` ボタンをクリックした場合、確認画面が表示されます。`OK` ボタンをクリックしてください。

10. インストールが完了しました。`完了` ボタンをクリックしてインストールを終了してください。


**（注意事項）**

JRE（Java の実行環境）がインストールされている場合は、一部機能を利用するために必要な JPKI利用者ソフトのプログラムが登録されます。なお、JRE への JPKI利用者ソフトのプログラム登録は、インストール後にも行うことができます。一部機能を利用する場合は、JRE をインストールした後、JPKI利用者ソフトのヘルプ等から「Java実行環境へ登録する」を参照し、ユーティリティの「Java実行環境への登録」を実行してください。

Android端末を IC カードリーダライタとしてご利用になる場合は、ペアリングと IC カードリーダライタ設定が必要になります。詳細は「第６章 Android端末とのペアリング」と「付録３．ICカードリーダライタ設定について」を参照してください。


## 第４章 JPKI利用者ソフトの起動

JPKI利用者ソフトを起動します。（本章では、Windows10 をお使いの場合の例を示します。）Android端末を IC カードリーダライタとしてご利用になる場合は、ペアリングが必要になります。詳細は「第６章 Android端末とのペアリング」を参照してください。

1. 公的個人認証サービスの電子証明書が格納された IC カードを IC カードリーダライタに挿入します。

2. JPKI利用者ソフトを起動します。[スタート] → [アプリ] → [公的個人認証サービス] から [JPKI利用者ソフト] を起動します。

3. メニュー画面が表示されますので、`自分の証明書(U)` ボタンをクリックします。

4. 個人番号カードの場合は証明書選択ダイアログが表示されます。証明書を選択し、`OK` ボタンをクリックします。

5. パスワードの入力ダイアログが表示されます。公的個人認証 署名用パスワードまたは公的個人認証 利用者証明用パスワードを入力し、`OK` ボタンをクリックします。（画像は公的個人認証 署名用パスワードのものを使用しています。）

6. IC カードに格納された自分の電子証明書の内容が表示されます。（氏名の大括弧「[]」内は旧氏を示す。氏名の括弧「()」内は通称を示す。）正しく表示された場合は、`×` ボタンを押して証明書表示画面を閉じてください。


**（注意事項）**

正しく表示されない場合は、IC カードリーダライタのセットアップが正しく行われていないこと等が考えられます。セットアップ手順等に誤りがないことを確認してください。エラーの詳細については JPKIポータルサイトをご確認ください。

7. メニュー画面に戻りますので、各機能の詳細な操作手順を知りたい場合はヘルプや JPKIポータルサイトを参照してください。


**（注意事項）**

初期設定では「IC カードリーダライタを自動検出する(A)」が選択されており、パソコンに接続された IC カードリーダライタを自動検出します。IC カードリーダライタのドライバソフトウェアがインストールされていない場合や IC カードリーダライタがパソコンに接続されていない場合は、自動検出が行われません。また、IC カードリーダライタの機種によっては、自動検出が行われない場合があります。そのような場合は、必要に応じて手動で IC カードリーダライタ設定を行ってください（付録３参照）。なお、Bluetooth 対応は自動検出の対象外となります。Android端末を利用する場合は必ず設定してください。


## 第５章 JPKI利用者ソフトのアンインストール

JPKI利用者ソフトのアンインストールを行います。（本章では、Windows10 をお使いの場合の例を示します。）

1. [スタート] → [Windows システム ツール] → [コントロール パネル] を開き、[プログラムと機能] アイコンをクリックします。以下の画面が表示されるので `JPKI 利用者ソフト` を右クリックし、`アンインストール` をクリックしてください。


**（注意事項）**

ユーザーアカウント制御ダイアログが表示される場合があります。`はい(Y)` ボタンをクリックすると JPKI利用者ソフトセットアップダイアログが表示されます。

2. JPKI利用者ソフトセットアップダイアログが表示されます。`はい(Y)` ボタンをクリックするとアンインストールが開始されます。

アンインストールが完了すると以下の画面が表示されます。`完了` ボタンをクリックしてアンインストールを終了してください。


**（注意事項）**

アンインストール完了後、以下の画面が表示される場合があります。「はい、今すぐコンピュータを再起動します。」を選択し、`完了` ボタンをクリックしてパソコンを再起動してください。


## 第６章 Android端末とのペアリング

Android端末とのペアリングを行います。（本章では、Windows10、Android 5.1.1 をお使いの場合の例を示します。）

1. Android端末を周辺の機器からペアリングできる状態にします。設定アプリの Bluetooth の項目を開き、周辺の機器に表示されるメッセージを確認してください。

2. [スタート] → ⚙ から設定を起動します。

3. Windows設定の [デバイス] をクリックしてください。

4. Bluetooth を `オン` にし、`＋` をクリックしてください。

5. `デバイスを追加する` を開き [Bluetooth] をクリックしてください。

6. パソコンの周辺にあるペアリング可能な機器の一覧が表示されます。パソコンに表示されている Android端末をクリックしてください。

   **ご参考**  
   [スタートメニュー] → [コントロールパネル] → [デバイスとプリンター] を開き、`デバイスの追加` からペアリングする Android端末を選択することもできます。

7. パソコンに表示されているパスコードが Android端末に表示されているパスコードと同じことを確認し、パソコン側は `はい(Y)` ボタンをクリック、Android端末側は「ペア設定する」をタップしてください。

8. パソコンに表示されている Android端末の項目にペアリング済みと表示されていることを確認し、画面を閉じてください。


## 付録１．システム環境変数「Path」値の長さの制限について

JPKI利用者ソフトのインストーラは、システム環境変数の Path (以下、Path環境変数) に JPKI利用者ソフトのインストールパスを追記しますが、追記する時に長さの制限を超える場合に以下のエラーダイアログが表示され、インストールが中止されます。

この場合、インストール前に Path環境変数の中から不要な値を事前に削除するなどして、既存の Path環境変数に、JPKI利用者ソフトのインストールパスを追記した時の値の長さが下表に示す制限値以下になるよう調整してください。

Path環境変数の中の不要な値の判断は Windows に関する技術知識が必要であり、インストールされているソフトウェアの種類や設定されている値に応じて異なります。また、誤って値の調整に失敗するとパソコンの動作に支障をきたすことがありますので、作業に不安のある方は Windows に関する技術知識のある方に相談するなどしながら、注意して作業を行ってください。

| OSの種類               | Path環境変数の長さの制限 |
|------------------------|---------------------------|
| Windows 10(32/64bit)   | 2047文字以下              |
| Windows 11             | 2047文字以下              |


## 付録２．アップデートについて

旧バージョンなどの JPKI利用者ソフトが既にインストールされている環境にインストール（アップデート）する場合、以下の手順の通りに画面が表示されます（インストール先の選択はできません）。

必ず Administrator グループのユーザでログインし、インストールを行ってください。（Administrator グループ以外のユーザでインストールを行うことはできません。）

1. Windows 上で起動しているすべてのソフトウェアを終了します。（それぞれのソフトウェアの終了方法については、ソフトウェアに付属のマニュアルを参照してください。）

2. エクスプローラ等を利用し、JPKIポータルサイトからダウンロードした実行ファイル `JPKIAppli03-05.exe` をダブルクリックしてインストーラを起動してください。


**（注意事項）**

Administrator 権限以外でアップデートを実行した場合は、予期せぬメッセージ等が表示される可能性があります。必ず Administrator 権限で実行ください。

ユーザーアカウント制御ダイアログが表示されます。`はい(Y)` ボタンをクリックすると JPKI利用者ソフトセットアップダイアログが表示されます。


**（注意事項）**

以下のユーザーアカウント制御ダイアログが表示される場合があります。JPKIポータルサイトからダウンロードした `JPKIAppli03-05.exe` を実行していることを確認し、`はい(Y)` ボタンをクリックすると、JPKI利用者ソフトセットアップ画面が表示されます。

3. JPKI利用者ソフトセットアップ画面が表示されます。

4. `次へ(N)` ボタンをクリックして、次画面に進みます。

5. プログラムフォルダを確認し、`次へ(N)` ボタンをクリックして次画面に進みます。プログラムフォルダ名を変更する場合は、`プログラムフォルダ` 欄に変更するフォルダ名を入力してください。

6. 設定内容を確認し、`次へ(N)` ボタンをクリックして次画面に進みます。

7. JPKI利用者ソフトのインストールが開始されます。


**（注意事項）**

JPKI利用者ソフトを再インストールする場合、以下の上書き確認メッセージが表示される場合があります。`はい(Y)` ボタンをクリックしてください。

8. 電子証明書の更新通知設定ダイアログが表示されます。更新通知を有効にする場合は `はい` ボタンをクリックしてください。アップデート後に、更新通知の設定を変更する場合の手順については、付録４を参照してください。`はい` ボタンをクリックした場合、確認画面が表示されます。`OK` ボタンをクリックしてください。


## 付録３．IC カードリーダライタ設定について

Android端末を IC カードリーダライタとしてご利用になる場合と、PC/SC 対応 IC カードリーダライタの自動検出ができない場合は、下記手順で IC カードリーダライタを手動設定してください。

（注意事項）

初期設定では「IC カードリーダライタを自動検出する(A)」が選択されています。Android端末を IC カードリーダライタとしてご利用になる場合は設定が必要になります。また、PC/SC 対応 IC カードリーダライタの自動検出ができない場合は、以下の手順で IC カードリーダライタを手動設定してください。

1. [スタート] → [アプリ] → [公的個人認証サービス] から `ICカードリーダライタ設定` を起動します。PC/SC 対応 IC カードリーダライタをご利用になる場合は手順2に、Android端末をご利用になる場合は手順5にお進みください。

2. **PC/SC 対応 IC カードリーダライタの場合**

   お使いになる IC カードリーダライタのドライバインターフェースを確認し、「PC/SC対応(P)」を選択します。（ドライバインターフェースについては、市区町村窓口で配布された資料や JPKIポータルサイトなどを参照してください。）

3. プルダウンメニューからお使いの IC カードリーダライタを選択し、`設定(S)` ボタンをクリックします。

4. 設定完了ダイアログが表示されるので `OK` ボタンをクリックします。PC/SC 対応 IC カードリーダライタをご利用になる場合は、手順5以降は不要です。

5. **Android端末の場合**

   お使いになる Android端末が Bluetooth 対応であることを確認し、「Bluetooth対応(B)」をクリックします。

6. プルダウンメニューからお使いの Android端末を選択し、`設定(S)` をクリックします。デバイス名称に Android端末が表示されない場合には、ご利用のパソコンと Android端末が Bluetooth ペアリングできているか確認

してください。詳細は「第６章 Android端末とのペアリング」を参照してください。

7. 設定完了ダイアログが表示されるので `OK` ボタンをクリックします。


## 付録４．更新通知設定の変更方法について

インストール後に更新通知設定を変更する場合は、下記手順で変更を行ってください。

1. [スタート] → [アプリ] → [公的個人認証サービス] から `更新通知設定` を起動します。

2. 更新通知を有効にする場合は `はい` ボタンをクリックしてください。無効にする場合は `いいえ` ボタンをクリックしてください。

3. `はい` ボタンをクリックした場合、確認画面が表示されます。`OK` ボタンをクリックしてください。

---

禁・無断転載

公的個人認証サービス 利用者クライアントソフト Ver3.5  
インストール手順書  
第 1.1版

（注意事項）

※利用者クライアントソフトの著作権は、総務省、地方公共団体情報システム機構が保有しており、国際著作権条約及び日本国の著作権関連法令によって保護されています。

※利用者クライアントソフトの利用に当たっては、次に掲げる行為を禁止します。

1. 利用者クライアントソフトを電子申請・届出等の行政手続等以外の目的で利用すること。  
2. 利用者クライアントソフトに対し、総務省、地方公共団体情報システム機構に許可なく改造等を行うこと。

※総務省、地方公共団体情報システム機構は、利用者が利用者クライアントソフトを利用したことにより発生した利用者の損害及び利用者が第三者に与えた損害について、一切の責任を負いません。

※商標については次の通りです。

1. Microsoft Windows は米国 Microsoft Corporation の米国およびその他の国における登録商標または商標です。  
2. Android は Google Inc. の米国およびその他の国における登録商標です。  
3. その他、記載されている会社名、製品名等は、各社の登録商標または商標です。
